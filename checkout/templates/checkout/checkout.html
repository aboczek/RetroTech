{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'checkout/css/checkout.css' %}">
{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-12 col-lg-6 d-flex flex-column justify-content-center align-items-center">
            <h2>Fill in your details:</h2>
            <form action="{% url 'checkout' %}" method="POST" id="payments"></form>
            {% csrf_token %}
            <ul class="mt-5 list-unstyled">
                <li>First and last name:</li>
                <li>{{ order_form.full_name | as_crispy_field }}</li>
                <li>Email Address:</li>
                <li>{{ order_form.email | as_crispy_field }}</li>
                <li>Phone number:</li>
                <li>{{ order_form.phone_number | as_crispy_field }}</li>
                <li>Street address(1):</li>
                <li>{{ order_form.street_address1 | as_crispy_field }}</li>
                <li>Street adress(2):</li>
                <li>{{ order_form.street_address2 | as_crispy_field }}</li>
                <li>County or State:</li>
                <li>{{ order_form.county_state | as_crispy_field }}</li>
                <li>Postal code:</li>
                <li>{{ order_form.postcode | as_crispy_field }}</li>
                <li>Town or City:</li>
                <li>{{ order_form.town_or_city | as_crispy_field }}</li>
                <li>Country:</li>
                <li>{{ order_form.country | as_crispy_field }}</li>
            </ul>
            {% if user.is_authenticated %}
            <div class="d-flex flex-column justify-content-start m-0">
                <label for="save-details">Save your details for next time!</label>
                <input type="checkbox" id="save-details" name="save-details">
            </div>
            {% else %}
            <p>To save your details either Login to your account or Sign up!</p>
            <div class="d-flex flex-row justify-content-center">
                <a class="btn btn-primary my-2 mx-2" href="{% url 'account_login' %}">Login</a>
                <a class="btn btn-warning my-2" href="{% url 'account_signup' }">Sign up</a>
            </div>
            {% endif %}
        </div>
        <div class=" col-12 col-lg-6 d-flex flex-column justify-content-center align-items-center">
                    {% for item in basket_items %}
                    <h2>Your order contains:</h2>
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Product name</th>
                                <th scope="col">Quantity</th>
                                <th scope="col">Subtotal</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>{{ item.item.product_name}}</td>
                                <td>{{ item.quantity }}</td>
                                <td>{{ item.total }}</td>
                            </tr>
                        </tbody>
                    </table>
                    {% endfor %}
                    <h2 class="mt-5">Payment:</h2>
                    <div class="d-flex flex-row justify-content-center">
                        <a class="btn btn-warning" href="{% url 'view_basket' %}"><i
                                class="fa-solid fa-basket-shopping"></i> Adjust your basket
                        </a>
                        <p class="mx-2">OR</p>
                        <button class="btn btn-success" id="pay-button"><i class="fa-solid fa-lock"></i> Complete
                            order</button>
                    </div>
                    <p class="my-5">Your card will be charged,
                        <span class="h2">Total: {{ grand_total|floatformat:2 }} â‚¬</span>
                    </p>
            </div>
        </div>
    </div>
    {% endblock %}